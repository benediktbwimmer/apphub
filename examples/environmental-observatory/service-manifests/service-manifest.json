{
  "services": [
    {
      "slug": "filestore-ingest-watcher",
      "displayName": "Filestore Ingest Watcher",
      "kind": "utility",
      "baseUrl": "http://127.0.0.1:4310",
      "healthEndpoint": "/healthz",
      "devCommand": "npm run dev --workspace @apphub/filestore-ingest-watcher",
      "workingDir": "services/filestore-ingest-watcher",
      "env": [
        { "key": "PORT", "value": "4310" },
        {
          "key": "WATCH_ROOT",
          "value": {
            "$var": {
              "name": "FILE_WATCH_ROOT",
              "default": "examples/environmental-observatory/data/inbox",
              "description": "Directory monitored for incoming minute-level CSV drops."
            }
          }
        },
        {
          "key": "WATCH_ARCHIVE_DIR",
          "value": {
            "$var": {
              "name": "FILE_ARCHIVE_DIR",
              "default": "examples/environmental-observatory/data/archive",
              "description": "Archive directory where processed inbox files are moved after upload."
            }
          }
        },
        {
          "key": "WATCH_CONCURRENCY",
          "value": {
            "$var": {
              "name": "WATCH_CONCURRENCY",
              "default": "4",
              "description": "Maximum number of concurrent uploads to the Filestore backend."
            }
          }
        },
        {
          "key": "FILESTORE_BACKEND_ID",
          "value": "{{ env.OBSERVATORY_FILESTORE_BACKEND_ID | default:1 }}"
        },
        {
          "key": "FILESTORE_BASE_URL",
          "value": "{{ env.OBSERVATORY_FILESTORE_BASE_URL | default:'http://127.0.0.1:4300' }}"
        },
        {
          "key": "FILESTORE_TOKEN",
          "value": "{{ env.OBSERVATORY_FILESTORE_TOKEN | default:'' }}"
        },
        {
          "key": "FILESTORE_TARGET_PREFIX",
          "value": "{{ env.OBSERVATORY_FILESTORE_INBOX_PREFIX | default:'datasets/observatory/inbox' }}"
        },
        {
          "key": "WATCH_DELETE_AFTER_UPLOAD",
          "value": "false"
        },
        {
          "key": "WATCH_OVERWRITE",
          "value": "true"
        }
      ]
    },
    {
      "slug": "observatory-dashboard",
      "displayName": "Observatory Dashboard",
      "kind": "dashboard",
      "baseUrl": "http://127.0.0.1:4311",
      "healthEndpoint": "/healthz",
      "devCommand": "npm run dev",
      "workingDir": "examples/environmental-observatory/services/observatory-dashboard",
      "env": [
        {
          "key": "REPORTS_DIR",
          "value": {
            "$var": {
              "name": "OBSERVATORY_REPORTS_DIR",
              "default": "examples/environmental-observatory/data/reports",
              "description": "Directory containing observatory status reports (status.html/json/md)."
            }
          }
        },
        {
          "key": "HOST",
          "value": "0.0.0.0"
        },
        {
          "key": "PORT",
          "value": "4311"
        },
        {
          "key": "DASHBOARD_REFRESH_MS",
          "value": "10000"
        }
      ]
    }
  ]
}
