apiVersion: v1
kind: ConfigMap
metadata:
  name: clickhouse-config
  namespace: apphub-system
  labels:
    app.kubernetes.io/name: clickhouse
    app.kubernetes.io/part-of: apphub-runtime
  annotations:
    clickhouse.altinity.com/override: "true"
data:
  storage.xml: |
    <clickhouse>
      <storage_configuration>
        <disks>
          <local_hot>
            <path>/var/lib/clickhouse/disks/local_hot/</path>
          </local_hot>
          <gcs_cold>
            <type>local</type>
            <path>/var/lib/clickhouse/disks/gcs_cold/</path>
          </gcs_cold>
        </disks>
        <policies>
          <timestore_demo>
            <volumes>
              <hot>
                <disk>local_hot</disk>
              </hot>
              <cold>
                <disk>gcs_cold</disk>
              </cold>
            </volumes>
            <move_factor>0.2</move_factor>
          </timestore_demo>
        </policies>
      </storage_configuration>
    </clickhouse>
  ports.xml: |
    <clickhouse>
      <listen_host>0.0.0.0</listen_host>
      <listen_host>::</listen_host>
      <listen_try>1</listen_try>
    </clickhouse>
  users.xml: |
    <clickhouse>
      <users>
        <default>
          <password></password>
        </default>
        <apphub>
          <password_sha256_hex>1b6a1f90f800886d12978b0f867f6d31c3c0707c9e318acca3ccd1464702edd8</password_sha256_hex>
          <profile>default</profile>
          <networks>
            <ip>::/0</ip>
          </networks>
        </apphub>
      </users>
    </clickhouse>
