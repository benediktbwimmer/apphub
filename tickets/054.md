# Ticket 054 – Advanced Filestore Search & Filters

## Summary
Upgrade filestore search to support metadata queries, size/age ranges, and rollup-derived statistics, then expose composable filters in the explorer UI.

## Motivation
The current single text search is limiting. Operators need to locate nodes by metadata tags, file size, or stale rollup data to triage drift quickly. Enhancing filters reduces manual SQL lookups.

## Scope
- Backend query engine:
  - Extend `/v1/nodes` and `/v1/nodes/:id/children` to accept structured filters (metadata key/value, size min/max, lastSeenAt ranges, rollup child thresholds).
  - Reuse Postgres JSONB indexing for metadata; add necessary indexes.
  - Validate query payloads through new zod schemas shared with the frontend.
- Frontend:
  - Replace the single search box with filter chips/forms (e.g., “metadata.owner=astro”, “size>10GiB”).
  - Persist filter state in the URL for shareable views.
  - Show active filter summary and quick reset controls.

## Acceptance Criteria
- Complex filter queries execute within acceptable latency (<400ms for 100k nodes).
- UI prevents invalid combinations and displays helpful error messaging.
- Automated tests cover metadata filtering edge cases and URL serialization.

## Dependencies / Notes
- Coordinate with database team before adding indexes/migrations.
- Update shared type packages for new filter DTOs.
